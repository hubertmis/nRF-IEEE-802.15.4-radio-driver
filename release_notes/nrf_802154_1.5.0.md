# nRF IEEE 802.15.4 radio driver 1.5.0 release notes

Release date: 2019-08-09

This release provides a new feature that enables the next higher layer to cancel scheduled delayed transmission or delayed reception operations. This functionality is needed to implement CSL properly for multiple links.
Additionaly this release includes a set of fixed bugs.

## New features:
* Cancelation of scheduled delayed transmissions and receptions. ([PR #247](https://github.com/NordicSemiconductor/nRF-IEEE-802.15.4-radio-driver/pull/247))
* The delayed reception window is extended when a frame is detected at the end of the window. Previoulsy it was extended assuming that the detected frame length is maximal possible (127 bytes of PSDU). Now it is extended only by the time needed to receive (and acknowledge if requested) the detected frame. ([PR #246](https://github.com/NordicSemiconductor/nRF-IEEE-802.15.4-radio-driver/pull/246))
* Measurement of RSSI during idle or active reception. ([PR #256](https://github.com/NordicSemiconductor/nRF-IEEE-802.15.4-radio-driver/pull/256), [PR #261](https://github.com/NordicSemiconductor/nRF-IEEE-802.15.4-radio-driver/pull/261))

## Bug fixes:
* Fixed several race conditions in the multi-protocol configuration. ([PR #250](https://github.com/NordicSemiconductor/nRF-IEEE-802.15.4-radio-driver/pull/250), [PR #254](https://github.com/NordicSemiconductor/nRF-IEEE-802.15.4-radio-driver/pull/254), [PR #257](https://github.com/NordicSemiconductor/nRF-IEEE-802.15.4-radio-driver/pull/257))
* Updated configuration of PA/LNA pins for nRF52811 to match the pinout of the nRF52840 development kit. ([PR #251](https://github.com/NordicSemiconductor/nRF-IEEE-802.15.4-radio-driver/pull/251))
* The `BKPT` instruction is now called only in the debug configuration enabled with the `ENABLE_DEBUG_ASSERT_BKPT`. Calling this instruction without a debugger connected to the MCU casuses faults that lead to resets and prevents post-mortem debugging. ([PR #254](https://github.com/NordicSemiconductor/nRF-IEEE-802.15.4-radio-driver/pull/254))
* Selected correct IRQ priority for the example clock driver provided with the driver source code. ([PR #258](https://github.com/NordicSemiconductor/nRF-IEEE-802.15.4-radio-driver/pull/258))
* Added missing public function to clear IE data stored for the Enh-Ack frames. ([PR #259](https://github.com/NordicSemiconductor/nRF-IEEE-802.15.4-radio-driver/pull/259))

## Limitations:
* The driver is tested only with the default configuration (no changes in the nrf_802154_config.h file). Test applications are compiled with optimizations for the code size.
* Number of supported peers for the Auto Pending Bit feature is limited to 127.
* In multiprotocol configuration (SoftDevice RAAL), the application cannot use IRQ priority levels 2 and 3.
* The delayed operations do not detect delays caused by the ISR latency. Because of the ISR latency, the delayed transmission might be delayed for too long, or the reception window might be shorter than requested for the delayed transmission operation. To avoid such problems, it is recommended to minimize the ISR latency of the RTC instance that is used by the lp_timer module (RTC2 by default).

### Limitations of simultaneous operation of the SoftDevice front end and the 802.15.4 front end:
* Do not use the PPI channels reserved by the SoftDevice. The S140 SoftDevice v6.1.0 reserves PPI channels 17-31. Check definition of the `NRF_SOC_SD_PPI_CHANNELS_SD_ENABLED_MSK` macro in the `nrf_soc.h` file to verify the list of reserved PPI channels.
* The SoftDevice and the 802.15.4 driver must use separate sets of PPI channels, for example (1, 2) and (3, 4).
* The SoftDevice and the 802.15.4 driver must use separate sets of GPIOTE channels, for example 4 and (6, 7).

## Known issues:
* If `NRF_802154_USE_RAW_API` is disabled, a pointer to a frame passed by the transmission result notifications is invalid. Workaround: enable `NRF_802154_USE_RAW_API` if the code relies on the passed pointer.
* Deinitialization during transmission procedure works incorrectly. Workaround: enter sleep state prior to deinitialization.
* Deinitialization of the driver works incorrectly in multiprotocol configuration (simulator or SoftDevice RAAL).
* Calling API of the driver in a loop when the driver is waiting for an ACK infinitely prolongs waiting for an ACK and leads to an assertion fault. Workaround: don't call API of the driver until last transmission request notifies success or failure.
